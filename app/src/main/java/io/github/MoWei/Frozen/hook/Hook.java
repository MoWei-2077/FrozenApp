package io.github.MoWei.Frozen.hook;import static io.github.MoWei.Frozen.hook.XpUtils.log;import android.os.Build;import de.robv.android.xposed.IXposedHookLoadPackage;import de.robv.android.xposed.XC_MethodReplacement;import de.robv.android.xposed.callbacks.XC_LoadPackage.LoadPackageParam;import io.github.MoWei.Frozen.BuildConfig;import io.github.MoWei.Frozen.hook.android.AlarmHook;import io.github.MoWei.Frozen.hook.android.BroadCastHook;import io.github.MoWei.Frozen.hook.android.FreezeitService;import io.github.MoWei.Frozen.hook.android.WakeLockHook;import io.github.MoWei.Frozen.hook.app.PowerKeeper;import io.github.MoWei.Frozen.hook.android.Audio.AudioStateHook;import io.github.MoWei.Frozen.hook.android.Audio.SendMediaButtonHook;import io.github.MoWei.Frozen.hook.android.PendingIntent.PendingIntentHook;import io.github.MoWei.Frozen.hook.android.Anr.ANRErrorStateHook;import io.github.MoWei.Frozen.hook.android.Anr.ANRHelperHooks;import io.github.MoWei.Frozen.hook.android.Anr.ANRHook;import io.github.MoWei.Frozen.hook.android.BroadCast.BroadcastIntentHook;import io.github.MoWei.Frozen.hook.android.BroadCast.BroadcastDeliveryHook;import io.github.MoWei.Frozen.hook.android.BroadCast.BroadcastSkipHook;public class Hook implements IXposedHookLoadPackage {    @Override    public void handleLoadPackage(LoadPackageParam lpParam) {        switch (lpParam.packageName) {            case Enum.Package.self:                XpUtils.hookMethod("Frozen[manager]:", lpParam.classLoader,                        XC_MethodReplacement.returnConstant(true),                        Enum.Class.self, Enum.Method.isXposedActive);                return;            case Enum.Package.android:                hookAndroid(lpParam.classLoader);                return;            case Enum.Package.powerkeeper:                PowerKeeper.Hook(lpParam.classLoader);                return;            default:        }    }    public void hookAndroid(ClassLoader classLoader) {        log("Frozen[Xposed]", BuildConfig.VERSION_NAME);        Config config = new Config();        new FreezeitService(config, classLoader);        new AlarmHook(config, classLoader);       // new AnrHook(config, classLoader);        new AudioStateHook(config, classLoader);        new SendMediaButtonHook(config, classLoader);        new PendingIntentHook(config, classLoader);        new ANRErrorStateHook(config, classLoader);        new ANRHelperHooks(config, classLoader);        new ANRHook(config, classLoader);        new BroadcastIntentHook(config, classLoader);        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.VANILLA_ICE_CREAM)            new BroadcastSkipHook(config, classLoader);        else if (Build.VERSION.SDK_INT == Build.VERSION_CODES.UPSIDE_DOWN_CAKE)            new BroadcastDeliveryHook(config, classLoader);        else            new BroadCastHook(config, classLoader);        new WakeLockHook(config, classLoader); //FreezeitService 的 handleWakeLock 暂时不用    }}